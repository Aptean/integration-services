{
	"info": {
		"_postman_id": "351e0c53-4f64-4e31-8f20-0c66b1d508e2",
		"name": "SDK",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "15936511"
	},
	"item": [
		{
			"name": "List Event Definitions",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "X-APTEAN-TENANT",
						"value": "{{producerTenantId}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-APIM",
						"value": "{{producerApiKeyBrowser}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-PRODUCT",
						"value": "{{producerProductId}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{apiBaseUrl}}/v2/event-definitions?productId=446ebd6c-b3c1-4b81-906f-b6dfe72b637e",
					"host": [
						"{{apiBaseUrl}}"
					],
					"path": [
						"v2",
						"event-definitions"
					],
					"query": [
						{
							"key": "productId",
							"value": "287dc3ae-9a54-41d5-aadd-06c2f0607c00",
							"description": "eam",
							"disabled": true
						},
						{
							"key": "productId",
							"value": "446ebd6c-b3c1-4b81-906f-b6dfe72b637e",
							"description": "m2m"
						},
						{
							"key": "productId",
							"value": "d6e08344-697c-4c26-8822-52842cda808e",
							"description": "ship",
							"disabled": true
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Event Definition",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-APTEAN-TENANT",
						"value": "{{producerTenantId}}",
						"type": "default"
					},
					{
						"key": "X-APTEAN-APIM",
						"value": "{{producerApiKeyBrowser}}",
						"type": "default"
					},
					{
						"key": "X-APTEAN-PRODUCT",
						"value": "{{producerProductId}}",
						"type": "default"
					},
					{
						"key": "X-APTEAN-USER",
						"value": "{{initiatedBy}}",
						"type": "text",
						"description": "user name or system identifier"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"productId\": \"{{producerProductId}}\",\n    \"productVersion\": \"\",\n    \"eventDefinitions\": [\n        {\n            \"name\": \"sample event definition\",\n            \"description\": \"sample event definition\",\n            \"type\": \"sample-def-v2\",\n            \"payloadSchema\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"orderId\": {\n                        \"type\": \"string\"\n                    },\n                    \"amount\": {\n                        \"type\": \"integer\"\n                    },\n                    \"orderDate\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": false\n            },\n            \"settings\": {\n                \"timeToLive\": \"0.00:10:00\",\n                \"retryable\": true\n            }\n        }\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{apiBaseUrl}}/v2/event-definitions",
					"host": [
						"{{apiBaseUrl}}"
					],
					"path": [
						"v2",
						"event-definitions"
					]
				}
			},
			"response": []
		},
		{
			"name": "Publish Event",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-APTEAN-TENANT",
						"value": "{{producerTenantId}}",
						"type": "text",
						"description": "Service tenant"
					},
					{
						"key": "X-APTEAN-APIM",
						"value": "{{producerApiKeyBrowser}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-PRODUCT",
						"value": "{{producerProductId}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-USER",
						"value": "{{$randomUserName}}",
						"type": "text",
						"description": "user name or system identifier"
					},
					{
						"key": "X-APTEAN-CORRELATION-ID",
						"value": "{{$guid}}",
						"type": "text",
						"description": "unique value for the event - can be guid or domain ID"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"eventDefinitionType\": \"sample-def-v2\",\n    \"sourceTenantId\": \"{{customer tenant ID}}\",\n    \"sourceProductId\": \"{{producerProductId}}\",\n    \"payload\": {\n        \"orderId\": \"{{$randomInt}}\",\n        \"amount\": {{$randomInt}},\n        \"orderDate\": \"{{$randomDateFuture}}\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{apiBaseUrl}}/v1/events",
					"host": [
						"{{apiBaseUrl}}"
					],
					"path": [
						"v1",
						"events"
					]
				},
				"description": "This POST request is used to publish events to AIP which is intended to be consumed by subscriber(s).\n\nThe header must contain unique correlation ID of the event which can often be a domain ID like order number.\n\n### Request Body\n\n- eventDefinitionType (string): the unique type of the event registered using the event-deinition POST. Event definition is tied to a particular product like ERP or a service like Ship.\n    \n- sourceTenantId (string): tenant ID of the customer for which the event that is being processed\n    \n- sourceProductId (string): productId creating the event\n    \n- payload (object): Contains data that conforms to the event definition payload schema"
			},
			"response": []
		},
		{
			"name": "Eventlog",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-APTEAN-TENANT",
						"value": "{{producerTenantId}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-APIM",
						"value": "{{producerApiKeyBrowser}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-PRODUCT",
						"value": "{{producerProductId}}",
						"type": "text"
					},
					{
						"key": "X-APTEAN-CORRELATION-ID",
						"value": "{{$guid}}",
						"type": "text",
						"description": "This value must match the correlation ID from the retrieved event"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"eventDefinitionType\": \"event-acknowledgement\",\n    \"sourceTenantId\": \"{{customer tenant ID}}\",\n    \"sourceProductId\": \"{{ProductId}}\",\n    \"payload\": {\n        \"action\": \"processed/received\",\n        \"message\": \"order created in erp\",\n        \"status\": \"success/fail\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{apiBaseUrl}}/v2/events/eventlog",
					"host": [
						"{{apiBaseUrl}}"
					],
					"path": [
						"v2",
						"events",
						"eventlog"
					]
				},
				"description": "This POST request is used to log events in the system. The request should be sent to {{apiBaseUrl}}/v2/events/eventlog with a JSON payload in the raw request body. The payload should include the eventDefinitionType, sourceTenantId, sourceProductId, action, message, and status.\n\nThe header must contain the correlationID from the event.\n\n### Request Body\n\n- eventDefinitionType (string): value is event-acknowledgement\n- sourceTenantId (string): tenant ID of the customer for which the event that is being processed\n    \n- sourceProductId (string): productId creating the event\n    \n- payload (object): Contains action, message, and status of the event"
			},
			"response": []
		}
	]
}
